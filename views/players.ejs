<html lang="en">
<%- include ('./layout/header') %>
    <div class="page-body container mt-5">
        <div class="columns">
            <div class="column is-one-quarter">
                    <aside class="menu " style="background: #ffffff;
                    box-shadow: 10px 10px 20px rgb(218 213 213 / 15%);
                    border-radius: 12px;">
                        <ul class="menu-list has-text-grey-dark" style="font-size: 20px;">
                          <li><a style="padding: 14px 20px; margin-bottom: 20px; font-weight: 500;" href="/players" data-menu-item="players" >Players</a></li>
                          <li><a style="padding: 14px 20px; font-weight: 500;" href="/nations" data-menu-item="nations">Nations</a></li>
                        </ul>
                      </aside>
            </div>
            <div class="column">
                <div class="mb-5" >
                    <h1 style="font-weight: bold;
                    font-size: 25px;
                    margin-bottom: 5px;
                    color: #171725;">Players</h1>
                    <p style="font-size: 14px;
                    color: #808191;">Manage your player</p>
                </div>
                <div class="mb-5 al is-flex is-justify-content-flex-end">
                    <button style="height: 66px; padding: 0 25px;
                    line-height: 1;
                    border-radius: 8px;
                    font-weight: 600;
                    font-size: 16px;" class="button is-primary has-background-success-light has-text-primary has-text-weight-bold" onclick="document.querySelector('.modal').classList.add('is-active')">Open Modal</button>
                    <div class="modal">
                        <div class="modal-background"></div>
                        <div class="modal-content">
                            <div class="box">
                                <form method="post">
                                  <div class="field is-horizontal">
                                    <div class="field-label is-normal" style="text-align: left !important;">
                                      <label class="label">Name</label>
                                    </div>
                                    <div class="field-body">
                                      <div class="field">
                                        <div class="control">
                                          <input
                                            required
                                            class="input is-info"
                                            name="name"
                                            type="text"
                                            placeholder="Enter name "
                                          />
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="field is-horizontal">
                                    <div class="field-label is-normal"  style="text-align: left !important;">
                                      <label class="label">Club</label>
                                    </div>
                                    <div class="field-body">
                                      <div class="field is-narrow">
                                        <div class="control">
                                          <div class="select is-fullwidth">
                                            <select name="club">
                                              <%for (let club of clubList){ %>
                                              <option value="<%= club.name %>">
                                                <%= club.name %>
                                              </option>
                                              <% } %>
                                            </select>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                    
                                  <div class="field is-horizontal">
                                    <div class="field-label is-normal"  style="text-align: left !important;">
                                      <label class="label">Position</label>
                                    </div>
                                    <div class="field-body">
                                      <div class="field is-narrow">
                                        <div class="control">
                                          <div class="select is-fullwidth">
                                            <select name="position">
                                              <%for (let position of positionList){ %>
                                              <option value="<%= position.name %>">
                                                <%= position.name %>
                                              </option>
                                              <% } %>
                                            </select>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                    
                                  <div class="field is-horizontal">
                                    <div class="field-label is-normal"  style="text-align: left !important;">
                                      <label class="label">Goals</label>
                                    </div>
                                    <div class="field-body">
                                      <div class="field">
                                        <div class="control">
                                          <input
                                            required
                                            class="input is-info"
                                            name="goals"
                                            type="number"
                                            placeholder="Number of total goals"
                                          />
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                    
                                  <div class="field is-horizontal">
                                    <div class="field-label is-normal"  style="text-align: left !important;">
                                      <label class="label">Image</label>
                                    </div>
                                    <div class="field-body">
                                      <div class="field">
                                        <div class="control">
                                          <input
                                            required
                                            class="input is-info"
                                            name="image"
                                            type="text"
                                            placeholder="URL of image"
                                          />
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                    
                                  <div class="field is-horizontal">
                                    <div class="field-label"  style="text-align: left !important;">
                                      <label class="label">Is Captain?</label>
                                    </div>
                                    <div class="field-body">
                                      <div class="field is-narrow">
                                        <div class="control">
                                          <label class="radio">
                                            <input
                                              required
                                              type="radio"
                                              name="isCaptain"
                                              checked="chec"
                                              value="true"
                                            />
                                            Yes
                                          </label>
                                          <label class="radio">
                                            <input
                                              required
                                              type="radio"
                                              name="isCaptain"
                                              value="false"
                                            />
                                            No
                                          </label>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                    
                                  <div class="field is-horizontal" style="text-align: center; margin-top: 30px;">
                                    <div class="field-body">
                                      <div class="field">
                                        <div class="control">
                                          <button class="button is-primary" style="background-color: #1DC071; width:180px; height: 50px; border-radius: 8px;font-weight: 600;
                font-size: 16px;" type="submit">
                  Create
                </button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </form>
                        </div>
                        <button class="modal-close is-large" onclick="document.querySelector('.modal').classList.remove('is-active')" aria-label="close"></button>
                      </div>
                  </div> 
                </div>
                    <table class="table">
                      <thead style="background-color: #f7f7f8; font-size: 16px;">
                        <tr>
                          <th style="padding: 20px 45px;
                          font-weight: 600;
                          text-align: left;">Image</th>
                          <th style="padding: 20px 55px;
                          font-weight: 600;
                          text-align: left;">Name</th>
                          <th style="padding: 20px 55px;
                          font-weight: 600;
                          text-align: left;">Team</th>
                          <th style="padding: 20px 45px;
                          font-weight: 600;
                          text-align: left;">Position</th>
                          <th style="padding: 20px 40px;
                          font-weight: 600;
                          text-align: left;">Goals</th>
                            <th style="padding: 20px 40px;
                            font-weight: 600;
                            text-align: left;">Captain</th>
                          <th style="padding: 20px 45px;
                          font-weight: 600;
                          text-align: center;">Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% players.forEach(function(player){ %>
                        <tr>
                          <td style="padding: 20px 45px">
                            <a href="players/profile/<%=player.id%>">
                              <figure class="image is-64x64">
                                <img src="<%= player.image %>" />
                              </figure>
                            </a>
                          </td>
                          <td style="padding: 15px 30px;
                          font-weight: 600; line-height: 2;">
                            <a style=" display: block; width: 140px; color: rgb(34 197 94);" href="players/profile/<%=player.id%>"
                              ><%= player.name %></a
                            >
                          </td>
                          <td style="padding: 15px 30px;
                          font-weight: 600; text-align: center; line-height: 2;"><%= player.club %></td>
                          <td style="text-align: center; padding: 15px 40px;  font-weight: 600; line-height: 2;"><%= player.position%></td>
                          <td style="text-align: center; padding: 15px 40px;  font-weight: 600; line-height: 2;"><%=player.goals%></td>
                          <td style=" text-align: center; padding: 15px 40px">
                            <% if(JSON.stringify(player.isCaptain)==='true') { %>
                              <span style="    display: inline-block;
                              padding: 10px 15px;
                              border-radius: 8px;
                              font-size: 14px;
                              font-weight: 500; background-color: rgba(29,192,113,0.1); color: rgb(34 197 94);"> YES
                           </span>
                          <% } else {%>
                            <span style=" display: inline-block;
                              padding: 10px 15px;
                              border-radius: 8px;
                              font-size: 14px;
                              font-weight: 500; background-color: rgb(255 237 213); color: rgb(249 115 22);"> NO
                           </span>
                          <%} %>
                          </td>
                          <td style="padding: 15px 30px;">
                            <div class="buttons are-small" style="display: flex; align-items: center; column-gap: 0.75rem; width: 150px; justify-content: center;">
                              <!-- <a href="players/editPlayer/<%=player.id%>">
                                <button class="button is-warning is-light">
                                  Edit
                                </button></a
                              > -->
                              <span
      style="display: flex; align-items: center; justify-content: center; width: 2.5rem; height: 2.5rem; border: 1px; border-color: rgb(229 231 235); border-radius: 0.25rem; cursor: pointer; border-style: solid;"
      onClick="editPlayer()"
      data-player-id="<%=player.id%>"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        style="width: 20px; height: 20px;"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        strokeWidth="2"
        onClick="editPlayer()"
        data-player-id="<%=player.id%>"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
        />
      </svg>
    </span>
    <span
      style="display: flex; align-items: center; justify-content: center; width: 2.5rem; height: 2.5rem; border: 1px; border-color: rgb(229 231 235); border-radius: 0.25rem; cursor: pointer; border-style: solid;"
      onClick="deletePlayer()"
      data-player-id="<%=player.id%>"
    >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      style="width: 20px; height: 20px;"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      strokeWidth="2"
      onClick="deltePlayer()"
      data-player-id="<%=player.id%>"
    >
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
      />
    </svg>
  </span>
                            </div>
                          </td>
                        </tr>
                        <%})%>
                      </tbody>
                    </table>
                 
            </div>
        </div>
    </div>
    <script>
      function editPlayer() {
  const playerId = event.target.dataset.playerId; // lấy giá trị data-player-id từ phần tử được nhấp vào
  const deleteUrl = `/players/editPlayer/${playerId}`; // tạo đường dẫn chuyển hướng

  window.location.href = deleteUrl; // chuyển hướng đến trang xóa người chơi
}
function deltePlayer() {
  const playerId = event.target.dataset.playerId; // lấy giá trị data-player-id từ phần tử được nhấp vào
  const deleteUrl = `/players/deletePlayer/${playerId}`; // tạo đường dẫn chuyển hướng

  if (confirm('Are you sure you want to delete this player?')) {
    window.location.href = deleteUrl;
  }// chuyển hướng đến trang xóa người chơi
}

    </script>
    <script>
      // Lấy URL hiện tại
      var currentUrl = window.location.href;
      console.log(currentUrl);
      // Nếu URL chứa "/players", đặt lớp "selected" cho li chứa link đó
      if (currentUrl.includes("/players") || currentUrl.includes("/players/editPlayer") ) {
        document.querySelector('a[href="/players"]').parentNode.classList.add("selected");
      }
    
      // Nếu URL chứa "/nations", đặt lớp "selected" cho li chứa link đó
      if (currentUrl.includes("/nations")) {
        document.querySelector('a[href="/nations"]').parentNode.classList.add("selected");
      }
    </script>
    
  </body>
</html>
